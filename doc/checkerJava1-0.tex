\documentclass[10pt]{article}
\usepackage[affil-it]{authblk}

\usepackage[table]{xcolor}
\usepackage{mathrsfs} % for mathscr
\usepackage{amssymb,amsmath}
\usepackage{graphicx}
\usepackage{hyperref} 
\usepackage{multirow}
%\usepackage{scrextend}
\usepackage{xspace}
\usepackage{booktabs}
\usepackage{enumitem} 
\usepackage{caption} 
\usepackage{subcaption} 
\usepackage{comment}
\usepackage{longtable}

% tuning toc, chapters, list items
\hypersetup{colorlinks,linkcolor={red!50!black},citecolor={blue!50!black},urlcolor={blue!80!black}}
\usepackage[toc,page]{appendix}
\usepackage[top=1.5in, bottom=1.5in, left=1.41in, right=1.41in]{geometry}
\usepackage{titlesec}
\newcommand{\chapnumfont}{\usefont{T1}{pnc}{b}{n}\fontsize{100}{100}\selectfont}
\colorlet{chapnumcol}{gray!75}  % color for chapter number
\titleformat{\chapter}[display]{\filleft\bfseries}{\filleft\chapnumfont\textcolor{chapnumcol}{\thechapter}}{-24pt}{\Huge}
\setlist{topsep=2.2pt,itemsep=0.5pt} %nolistsep}%\setlist[itemize]{itemsep=0.5pt}

\usepackage{tikz}
\usetikzlibrary{shapes,calc,positioning,automata,arrows,trees}

\usepackage[tikz]{bclogo}
\renewcommand\logowidth{15pt}
\newcommand\bcpenr{\includegraphics[width=\logowidth]{crayonRed.png}} 
\newcommand\bcpen{\includegraphics[width=\logowidth]{figures/crayonBlue.png}} 
\newcommand\bcdico{\includegraphics[width=\logowidth]{figures/bookJaune.png}} 
\newcommand\bcroue{\includegraphics[width=\logowidth]{figures/roue.png}} 
%\renewcommand\bcStyleTitre[1]{\large\textbf{#1}}

\newcounter{cntM3}
\newcounter{cntSy}
\newcounter{cntSe}
\newcounter{cntEx}

\usepackage{listingsutf8}

\lstdefinelanguage{syntax}{
  keywords={realExpr,rankType,orderedType,iaBaseRelation,paBaseRelation,rcc8BaseRelation,measureType,combinationType,blockType,decimal,branchingType,restartsType,consistencyType,filteringType,varhType,valhType,intCtr,integer,unsignedInteger,constraint,metaConstraint,intExpr,boolExpr,boolExprSet,boolExprReal,wspace,dimensions,realVar,realVal,qualVar,graphVar,node,varType,setVar,setVal,frameworkType,proba,intIntvl,realIntvl,number,intVar,intVal,symbol,operator,operand,boolean,identifier,state,restrictionList},
  keywordstyle=\color{dblue}\slshape,
  basewidth  = {.5em,0.5em},
  %title={\bf Syntax},%
  escapechar=@,
  %caption={\bf Syntax},nolol,captionpos=t,belowcaptionskip=2pt,frame=single,rulesep=2pt,
  xleftmargin=1pt,xrightmargin=1pt,
  breaklines=true,basicstyle=\ttfamily\linespread{1.0}\small,backgroundcolor=\color{colorsy},inputencoding=utf8/latin9,texcl
}

\lstdefinelanguage{semantics}{
  keywords={identifier}, 
  basewidth  = {.5em,0.5em},
  %title={\bf Semantics}, 
  escapechar=@,
  %comment=[l]{//},
  %commentstyle=\color{dgray}\ttfamily,
  %nolol,captionpos=t,belowcaptionskip=2pt,
  %frame=single,
  %rulesep=2pt,
  xleftmargin=1pt,xrightmargin=1pt,
  breaklines=true,basicstyle=\ttfamily\linespread{1.20}\small,backgroundcolor=\color{colorse},inputencoding=utf8/latin9,texcl,mathescape
}

\lstdefinelanguage{xcsp}{
  keywords={region,instance,variables,literals,var,domain,constraints,objectives,annotations,annotation,array,extension,intension, tuples, supports,conflicts,args,quantification,fuzzy,relation,interval,point,agents,agent,allDifferent,count,ordered,vars,ctrs,comm,stages,decision, stochastic,required,possible,nodes,edges,arcs,minimize,maximize,linear,operator,value,allEqual,among,atLeast,atMost,exactly,limit,cumulative,circuit,regular,mdd,hamming,channel,element,values,transitions,origins,durations,indexes,permutation,coeffs,nValues,clause,cube,sort,lex,precedence,cardPath,slide,slidingAmong,slidingSum,sequence,gsc,seqbin,binPacking,maximum,minimum, hardTemplate,softTemplate,capacities,loads,intervals,costMatrix,knapsack,allDisjoint,overlap,exists,forall,aggregate,dbd,output,min,max,varHeuristic,valHeuristic,lastConflict,vals,BC, AC, FC, prepro, search, filtering, restarts,group,width, widths, stretch,lengths,block,start,final,balance,path,tree, root, succs, range, image, allDistant, roots, capacity, bins, sizes, heights,and, or, except, function, matrix, sumCosts, increasing, index, list,lists,set,mset,terminal,rules,grammar,mapping,cards, ranges, rowCards, colCards, indexes, not, allIntersecting, costMeasure, accept, limits, relation, sum, comparison, operand, condition, conditions, nCircuits, nPaths, nTrees, rowOccurs, colOccurs, occurs, noOverlap,cost, total, number, cardinality, scope, static
},
  basewidth  = {.6em,0.6em},
  keywordstyle=\color{mblue}\bfseries,
  ndkeywords={of,consistency,branching,lc,combination,defaultDegree,id, size, startIndex, format, type, reifiedBy, hreifiedFrom, hreifiedTo, as, measure, degree, threshold, cutoff, factor, varsModel, ctrsModel, commModel, for, case, closed, rank, restriction, circular, offset, collect, window, violable, order , defaultCost},
  ndkeywordstyle=\color{dviolet}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{<!--}{-->},
  commentstyle=\color{dred}\ttfamily,
  stringstyle=\color{dgreen}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  %title={\bf Example}, 
  escapechar=@,
  %framerule=1pt,
  %framesep=0pt,
  %numberstyle=\large,
  %nolol,captionpos=t,belowcaptionskip=2pt,
  %frame=shadowbox,
  %rulesep=2pt,
  showstringspaces=false,
  xleftmargin=1pt,xrightmargin=1pt,
  %rulesepcolor=\color{bgray},frameround=ffff,
  breaklines=true,basicstyle=\ttfamily\small,backgroundcolor=\color{colorex},inputencoding=utf8/latin9,texcl
}

%\def\bw{1}
\ifx\bw\undefined
  \lstnewenvironment{syntax}{\lstset{language=syntax}}{}
  \lstnewenvironment{semantics}{\lstset{language=semantics}}{}
  \lstnewenvironment{xcsp}{\lstset{language=xcsp}}{} 
  \newenvironment{boxsy}
               {\medskip
                 %\begin{addmargin}[-0.5cm]{-0.5cm}
                   \stepcounter{cntSy} \begin{bclogo}[couleur = colorsy,couleurBord=dgray,epBord=0.01,arrondi=0.2,couleurOmbre=dgray,ombre=true,epOmbre=0.05,logo=\bcpen]{ Syntax \thecntSy} \vspace{-0.1cm}}
               {\vspace{-0.1cm}\end{bclogo}
                 %\end{addmargin}
                  ~ \vspace{-0.2cm}}
  \newenvironment{boxse}
               {\medskip \stepcounter{cntSe} \begin{bclogo}[couleur = colorse,couleurBord=dgray,epBord=0.01,arrondi=0.2,couleurOmbre=dgray,ombre=true,epOmbre=0.05,logo=\bcdico]{ Semantics \thecntSe}\vspace{-0.1cm}}
               {\vspace{-0.1cm}\end{bclogo} ~ \vspace{-0.2cm}} %\medskip}
  \newenvironment{boxex}
               {\medskip \stepcounter{cntEx} \begin{bclogo}[couleur = colorex,couleurBord=dgray,epBord=0.01,arrondi=0.2,couleurOmbre=dgray,ombre=true,epOmbre=0.05,logo=\bcroue]{ Example \thecntEx}\vspace{-0.1cm}}
               {\vspace{-0.1cm}\end{bclogo} ~ \vspace{-0.2cm}} %\medskip}
  \newenvironment{simplex}
               {\medskip \begin{bclogo}[couleur = colorex,couleurBord=dgray,epBord=0.01,arrondi=0.2,couleurOmbre=dgray,ombre=true,epOmbre=0.05,barre=none,logo=]{}\vspace{-0.5cm}}
               {\vspace{-0.1cm}\end{bclogo} \medskip}
\else
  \lstnewenvironment{syntax}{\lstset{language=syntax,backgroundcolor=\color{white}}}{}
  \lstnewenvironment{semantics}{\lstset{language=semantics,backgroundcolor=\color{white}}}{}
  \lstnewenvironment{xcsp}{\lstset{language=xcsp,backgroundcolor=\color{white}}}{}
  \newenvironment{boxsy}
               {\medskip \stepcounter{cntSy} \begin{bclogo}[barre=none,logo=]{ Syntax \thecntSy}\vspace{-0.1cm}}
               {\vspace{-0.1cm}\end{bclogo} \medskip ~ \vspace{-0.3cm}}
  \newenvironment{boxse}
               {\medskip \stepcounter{cntSe} \begin{bclogo}[barre=none,logo=]{ Semantics \thecntSe}\vspace{-0.1cm}}
               {\vspace{-0.1cm}\end{bclogo} \medskip}
  \newenvironment{boxex}
               {\medskip \stepcounter{cntEx} \begin{bclogo}[barre=none,logo=]{ Example \thecntEx}\vspace{-0.1cm}}
               {\vspace{-0.1cm}\end{bclogo} \medskip}
  \newenvironment{simplex}
               {\medskip \begin{bclogo}[barre=none,logo=]{}\vspace{-0.5cm}}
               {\vspace{-0.1cm}\end{bclogo} \medskip}
\fi
\lstdefinelanguage{absc}{
  keywords={specifyArguments,specifyVariables,specifyConstraints, specifyObjectives,Problem
},
  basewidth  = {.6em,0.6em},
  keywordstyle=\color{mblue}\bfseries,
  ndkeywords={id},
  ndkeywordstyle=\color{dviolet}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{<!--}{-->},
  commentstyle=\color{dred}\ttfamily,
  stringstyle=\color{dgreen}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  %title={\bf Example}, 
  escapechar=@,
  %framerule=1pt,
  %framesep=0pt,
  %numberstyle=\large,
  %nolol,captionpos=t,belowcaptionskip=2pt,
  %frame=shadowbox,
  %rulesep=2pt,
  showstringspaces=false,
  xleftmargin=1pt,xrightmargin=1pt,
  %rulesepcolor=\color{bgray},frameround=ffff,
  breaklines=true,basicstyle=\ttfamily\police,backgroundcolor=\color{colorex},inputencoding=utf8/latin9,texcl
}
\lstnewenvironment{absc}{\lstset{language=absc,basicstyle=\ttfamily\scriptsize,backgroundcolor=\color{white}}}{}
\newenvironment{boxabsc}
               {\medskip \begin{bclogo}[barre=none,arrondi=0.2,logo=]{}\vspace{-0.6cm}}
               {\vspace{-0.1cm}\end{bclogo} \smallskip}

\newtheorem{definition}{Definition}
\newtheorem{remark}{Remark}
\newtheorem{remarks}{Remarks}

\definecolor{v2lgray}{gray}{0.85}
\definecolor{vlgray}{gray}{0.92}
\definecolor{mygray}{rgb}{0.92,0.98,0.92}
\definecolor{bgray}{rgb}{0.8,0.8,0.8}
\definecolor{dgray}{rgb}{0.4,0.4,0.4}
\definecolor{dblue}{RGB}{0,0,99}
\definecolor{dred}{RGB}{150,6,54}
\definecolor{dgreen}{RGB}{47,135,7}
\definecolor{d2green}{RGB}{47,85,7}
\definecolor{dviolet}{RGB}{102,0,153}
\definecolor{mblue}{RGB}{0,0,180}
\definecolor{m2blue}{RGB}{0,0,220}
\definecolor{colorse}{RGB}{255,248,220}
\definecolor{colorsy}{HTML}{F2F2F2}
\definecolor{colorex}{HTML}{FFE3BE}


\def\N{\mathbb{N}}
\def\Q{\mathbb{Q}}
\def\D{{\mathsf{D}}}
\def\B{{\mathsf{B}}}
\def\DINT{{\mathsf{D}_\mathsf{int}}}
\def\BINT{{\mathsf B}_\mathsf{int}} 
\def\ti{\textrm{-}}
\def\tr{\;\!\triangleright}
\def\st{\!:\!}

\def\gecode{Gecode\xspace}
\def\choco{Choco3\xspace}
\def\abscon{AbsCon\xspace}
\def\mzinc{MiniZinc\xspace}
\def\jacop{JaCoP\xspace}
\def\minion{Minion\xspace}
\def\xt{{\rm XCSP3}\xspace}
\def\cat{Global Constraint Catalog\xspace}



\newcommand{\xml}[1]{{\tt <#1>}} % xml element names
\newcommand{\att}[1]{{\tt #1}} % attribute names
\newcommand{\val}[1]{{\tt "#1"}} % attribute values

\newcommand{\bnf}[1]{\textsl{\color{dblue}{#1}}}
\newcommand{\bnfX}[1]{\texttt{<}\bnf{#1}\texttt{.../>}}
\newcommand{\norX}[1]{\texttt{<#1.../>}}


%\newcommand{\gb}[1]{\textcolor{dgreen}{{\tt #1}}} % global constraint names
\newcommand{\gb}[1]{{\tt #1}} % global constraint names
\newcommand{\gbc}[1]{\textcolor{dblue}{{\mathit #1}}} % global constraint names
\newcommand{\nn}[1]{{\tt #1}} % name normal
\newcommand{\nm}[1]{\mathit{#1}} % name math
\newcommand{\sy}[1]{{\ttfamily {\slshape #1}}}  % syntax elements like intValue etc.
\newcommand{\ns}[1]{{\mathcal #1}}  % symbol for set variables
\newcommand{\nss}[1]{{\mathbfcal #1}}  % symbol for set variables

\newcommand*{\com}[1]{\hfill \textcolor{dgray}{// #1}} % comment in lstlisting
\newcommand{\violet}[1]{{\small \textcolor{dviolet}{#1}}}

\newcommand{\va}[1]{{\boldsymbol #1}} % value of variable (for semantics)
%\newcommand{\va}[1]{\underline{#1}} % value of variable (for semantics)
%\newcommand{\va}[1]{#1} % value of variable (for semantics)

%\newcommand{\todoguys}[1]{\fbox{{\textcolor{red}{{\bf TODO : #1}}}}}

\tikzset{
  dirtree/.style={
    grow via three points={one child at (0.8,-0.7) and two children at (0.8,-0.7) and (0.8,-1.45)}, 
    edge from parent path={($(\tikzparentnode\tikzparentanchor)+(.4cm,0cm)$) |- (\tikzchildnode\tikzchildanchor)}, growth parent anchor=west, parent anchor=south west},
}

\usepackage{titlesec}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{3} 



\title{\textcolor{dred}{Java Solution Checker for \xt}\\ \textcolor{dred}{Version 1.0}}
\author{Gilles Audemard and Christophe Lecoutre} %\\ CRIL CNRS, UMR 8188 \\University of Artois, France \\ ~ \\\{audemard,lecoutre\}@cril.fr}

\date{CRIL CNRS, UMR 8188  \\University of Artois, France \\~ \\\{audemard,lecoutre\}@cril.fr \\~ \\September 1, 2016}



\begin{document}
\maketitle


The version 1.0 of the Java Solution Checker for \xt recognizes all constraints of \xt-core.
It can check if a given instantiation is a solution, and if a given cost associated with the solution is correct.

For example, for the following \xt instance called AllInterval-005.xml:
\begin{boxabsc}
\begin{absc}
<instance format="XCSP3" type="CSP">
  <variables>
    <array id="x" note="x[i] the ith value of the series" size="[5]"> 0..4 </array>
    <array id="y" note="y[i] the dist. from x[i] to x[i+1]" size="[4]"> 1..4 </array>
  </variables>
  <constraints>
    <allDifferent> x[] </allDifferent>
    <allDifferent> y[] </allDifferent>
    <group class="channeling">
      <intension> eq(%0,dist(%1,%2)) </intension>
      <args> y[0] x[0] x[1] </args>
      <args> y[1] x[1] x[2] </args>
      <args> y[2] x[2] x[3] </args>
      <args> y[3] x[3] x[4] </args>
    </group>
  </constraints>
</instance>
\end{absc} 
\end{boxabsc}

one can check that if the following instantiation is a solution (this is the case).
\begin{boxabsc}
\begin{absc}
<instantiation>  
  <list> x[] y[] </list>  
  <values> 4 0 3 1 2 4 3 2 1 </values>  
</instantiation>
\end{absc} 
\end{boxabsc}

\begin{remark}
The attribute \att{type}, which can be set the value \val{solution} or \val{optimum}, is not required. Anyway, the checker will never test if a specified instantiation represents an ``optimal'' solution (this is not a polynomial task).
\end{remark}

There are three ways of checking a solution (and possibly its cost).

The first one is:
\begin{quote}
\verb!java org.xcsp.checker.SolutionChecker <instanceFileName> <solutionFileName>!
\end{quote}

For example, if the file ``sol.txt'' contains the element \xml{instantiation} above,
then we can just write:
\begin{verbatim}
java org.xcsp.checker.SolutionChecker AllInterval-005.xml sol.txt
\end{verbatim}
and we obtain:
\begin{verbatim}
LOG: Check variables
LOG: Check constraints
LOG: Check objectives
VALID Solution!
\end{verbatim}

It is also possible to put the element \xml{instantiation} as second argument of the command line under the form of a String (framed with double quotes), which gives: 

\begin{verbatim}
java org.xcsp.checker.SolutionChecker  AllInterval-005.xml "<instantiation>  
<list> x[] y[] </list> <values> 4 0 3 1 2 4 3 2 1 </values>  </instantiation>"
\end{verbatim}

The third usage is to run its own solver that outputs elements \xml{instantiation} that can be checked by redirecting (under Linux) the output with a $\mid$.
For example:
\begin{verbatim}
java abscon.Resolution AllInterval-005.xml | java org.xcsp.checker.SolutionChecker  
AllInterval-005.xml
\end{verbatim}
  
\begin{remark}
Note that we have to indicate twice the file name of the instance.
\end{remark}

\end{document}

